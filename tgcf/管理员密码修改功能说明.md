# 管理员密码修改功能说明

## 功能概述

已为天官赐福管理系统添加了完整的管理员密码修改功能，包括：

1. **当前管理员修改自己的密码**
2. **管理员修改其他管理员的密码**
3. **密码强度验证**
4. **安全验证机制**

## 使用方法

### 1. 修改自己的密码

#### 方法一：通过导航栏下拉菜单
- 点击右上角的"账户"下拉菜单
- 选择"修改密码"
- 输入当前密码、新密码和确认密码
- 点击"确认修改"

#### 方法二：通过侧边栏
- 点击左侧菜单中的"修改密码"
- 按照提示完成密码修改

### 2. 修改其他管理员密码

- 进入"管理员管理"页面
- 找到要修改密码的管理员
- 点击"改密码"按钮
- 输入新密码（至少6位）
- 确认修改

## 安全特性

### 密码强度检查
- 最少6位字符
- 实时显示密码强度（弱/中/强）
- 支持大小写字母、数字、特殊字符组合

### 验证机制
- 修改自己密码需要验证当前密码
- 密码确认输入必须匹配
- 修改成功后自动退出登录

### 权限控制
- 只有登录的管理员才能修改密码
- 使用JWT token验证身份
- 所有操作都有日志记录

## 技术实现

### 后端API
```
POST /api/admin/update-password
```

**请求参数：**
```json
{
  "currentPassword": "当前密码",
  "newPassword": "新密码"
}
```

**响应格式：**
```json
{
  "success": true,
  "message": "密码修改成功"
}
```

### 前端功能
- Bootstrap模态框界面
- 实时密码强度检测
- 密码可见性切换
- 表单验证和错误提示

## 测试验证

运行测试脚本验证功能：
```bash
node test-password-change.js
```

测试内容包括：
- 管理员登录
- 错误密码验证
- 正确密码修改
- 新密码登录测试
- 密码恢复

## 注意事项

1. **密码安全**：建议使用包含大小写字母、数字和特殊字符的强密码
2. **定期更换**：建议定期更换管理员密码
3. **权限管理**：超级管理员可以修改所有管理员密码
4. **备份恢复**：修改密码前请确保记住当前密码

## 故障排除

### 常见问题

**Q: 提示"当前密码错误"**
A: 请确认输入的当前密码正确，注意大小写

**Q: 新密码强度不足**
A: 请使用至少6位字符，建议包含大小写字母、数字和特殊字符

**Q: 修改后无法登录**
A: 请使用新密码登录，如果忘记新密码，请联系其他管理员重置

**Q: 页面无响应**
A: 检查网络连接和服务器状态，刷新页面重试

## 更新日志

- **v1.0** - 基础密码修改功能
- **v1.1** - 添加密码强度检测
- **v1.2** - 完善用户界面和验证机制
- **v1.3** - 添加管理员间密码修改功能